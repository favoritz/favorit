<!--pages/postDetail/postDetail.wxml-->
<!-- detail -->
<page class="page detail">

  <view class='caroussel'>
    <swiper indicator-dots='true' autoplay='true' interval='2000' duration='500'style='height:600rpx'> 
      <swiper-item>
        <button bindtap='btn1'><image src='/img/Costco.jpg' class="slide-image" width="355rpx" height="150rpx"/></button>
      </swiper-item>
      <swiper-item>
        <button bindtap='btn2'><image src='/img/talk.jpg' class="slide-image" width="355rpx" height="150rpx"/></button>
      </swiper-item>
      <swiper-item>
        <button bindtap='btn3'><image src='/img/banner.jpg' class="slide-image" width="355rpx" height="150rpx"/></button>
      </swiper-item>
      </swiper>
    </view>

  <view class="detail-post-meta">
    <view class="detail-post-info">
      <view class="detail-post-author-name">
        <text>{{ detail.author.loginname }}</text>
        <view class="detail-type-item"  wx:if="{{detail.tab === 'good'}}">
          <view class="detail-type-item-font">#精华#</view>
        </view>
        <view class="detail-type-item"  wx:if="{{detail.tab === 'buy'}}">
          <view class="detail-type-item-font">#求二手#</view>
        </view>
        <view class="detail-type-item"  wx:if="{{detail.tab === 'sell'}}">
          <view class="detail-type-item-font">#出二手#</view>
        </view>
        <view class="detail-type-item"  wx:if="{{detail.tab === 'top'}}">
          <view class="detail-type-item-font">#置顶#</view>
        </view>
      </view>
    
      <view class="detail-post-title">
        <text> {{detail.post.title}} iPhoneX</text>
      </view>
     <view class="bar-info">
      <view class="bar-info-item">
      <image class="bar-info-item-icon" src="/img/收藏.png"></image>
      <view class="detail-post-time">发表于{{ detail.create_at }}</view>
      </view>
      <view class="bar-info-item">
      <image class="bar-info-item-icon" src="/img/location.png"></image>
      <view class="detail-post-time">发表于{{ detail.create_at }}</view>
      </view>

    <view>
        <text class="content-info">{{ detail.content }}出一台全新Iphonx，未拆，含Receipt，Guy Concordia地铁站面交或上门自取。</text>
     </view>
      </view>
    </view>


    <view class="detail-collect-item" id="{{detail.id}}" catchtap="collect" wx:if="{{detail.is_collect == true}}">取消收藏</view>
    <view class="detail-collect-item" id="{{detail.id}}" catchtap="collect" wx:if="{{detail.is_collect == false}}">收藏</view>

  </view>

  <view class="detail-post-header">

    <view class="detail-post-title">
      <view class="detail-posts-tag hot" wx:if="{{detail.top === true}}">置顶</view>
      <view class="detail-posts-tag" wx:if="{{detail.good === true}}">精华</view>
      {{ detail.title }}
    </view>

  </view>

  <view class="userinfo">
  <view>
    <image src='/img/avatar.png' style='float:left;height:100px;width:100px; margin-right:30rpx;'></image>
  </view>
  <view style="display:flex; flex-direction:column; justify-content: left; padding-top:20rpx;">
    <view style="margin-top:30rpx; margin-bottom:30rpx;">{{profile.username}}</view>
    <view style="color:#555555; font-size:32rpx;">已发布： {{profile.todocount}}件</view>
    <view style="color:#555555; font-size:32rpx;">已完成： {{profile.donecount}}件</view>
  </view>
  </view>


  <view class="detail-post-comment">
    <view class="detail-post-comment-title">评论</view>
    <view class="detail-post-comment-list">
      <block wx:for="{{ detail.replies }}" wx:if="{{detail.replies.length > 0}}">
        <view class="detail-post-comment-item" index="{{index}}" id="{{item.id}}">
          <view class="detail-post-comment-avatar">
            <image class="detail-post-comment-avatar-img" mode="scaleToFill" src="{{ item.author.avatar_url }}"></image>
          </view>
          <view class="detail-post-comment-cell">
            <view class="detail-post-comment-info">
              <view class="detail-post-comment-info-cell">
                <view class="detail-post-comment-author-name">{{ item.author.loginname }}</view>
                <view class="detail-post-comment-time">{{index + 2}}楼 发表于{{ item.create_at }}</view>
              </view>
              <view class="detail-post-comment-info-cell" style="text-align:right" id="{{item.id}}" data-index="{{index}}" catchtap="reply">
                <image class="detail-post-zan" mode="scaleToFill" src="/images/icon/zan.png"></image>
                <text class="detail-post-zan-num" wx:if="{{item.zanNum > 0}}">{{item.zanNum}}</text>
              </view>
            </view>
            <view class="detail-comment-content">
              <text class="detail-comment-text">{{ item.content }}</text>
            </view>
          </view>
        </view>
      </block>

      <block wx:if="{{detail.replies.length < 0}}">
        <view class="detail-post-comment-null">
          <image class="imgnull" mode="scaleToFill" src="/images/icon/null.png"></image>
          <text class="textnull">暂无收录评论 </text>
        </view>
      </block>

    </view>
  </view>


  <modal title="消息" confirm-text="确认" cancel-text="关闭" hidden="{{modalHidden}}" bindconfirm="confirmChange" bindcancel="cancelChange">
    您还没未登录，是否前往认证登录？
  </modal>

</page>

